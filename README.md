# æ–‡ä»¶å¿«ä¼ ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº Node.js + Express + SQLite çš„å¿«é€Ÿæ–‡ä»¶åˆ†äº«ç³»ç»Ÿï¼Œæ”¯æŒæ–‡ä»¶ä¸Šä¼ ã€åˆ†äº«é“¾æ¥ç”Ÿæˆã€éªŒè¯ç éªŒè¯å’Œæ–‡ä»¶ä¸‹è½½åŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸš€ **å¿«é€Ÿä¸Šä¼ **: æ”¯æŒæ‹–æ‹½ä¸Šä¼ ï¼Œæœ€å¤§100MBæ–‡ä»¶
- ğŸ”— **å®‰å…¨åˆ†äº«**: ç”Ÿæˆåˆ†äº«ç å’ŒéªŒè¯ç åŒé‡ä¿æŠ¤
- ğŸ“± **å“åº”å¼è®¾è®¡**: æ”¯æŒPCå’Œç§»åŠ¨ç«¯è®¿é—®
- ğŸ—„ï¸ **æ•°æ®æŒä¹…åŒ–**: ä½¿ç”¨SQLiteæ•°æ®åº“å­˜å‚¨æ–‡ä»¶ä¿¡æ¯
- â° **è‡ªåŠ¨è¿‡æœŸ**: æ–‡ä»¶7å¤©åè‡ªåŠ¨åˆ é™¤
- ğŸ“Š **ç®¡ç†é¢æ¿**: æä¾›æ–‡ä»¶ç®¡ç†å’Œç»Ÿè®¡åŠŸèƒ½
- ğŸ›¡ï¸ **å®‰å…¨é˜²æŠ¤**: æ–‡ä»¶ç±»å‹éªŒè¯ã€å¤§å°é™åˆ¶ã€é¢‘ç‡é™åˆ¶

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **Node.js** - JavaScriptè¿è¡Œæ—¶
- **Express** - Webåº”ç”¨æ¡†æ¶
- **SQLite3** - è½»é‡çº§æ•°æ®åº“
- **Multer** - æ–‡ä»¶ä¸Šä¼ ä¸­é—´ä»¶
- **CORS** - è·¨åŸŸèµ„æºå…±äº«
- **Express Rate Limit** - è¯·æ±‚é¢‘ç‡é™åˆ¶

### å‰ç«¯
- **HTML5** - é¡µé¢ç»“æ„
- **CSS3** - æ ·å¼è®¾è®¡
- **JavaScript (ES6+)** - äº¤äº’é€»è¾‘
- **Font Awesome** - å›¾æ ‡åº“

## ğŸ“¦ å®‰è£…éƒ¨ç½²

### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd fast-file-transfer
```

### 2. å®‰è£…ä¾èµ–
```bash
npm install
```

### 3. åˆå§‹åŒ–æ•°æ®åº“
```bash
npm run init-db
```

### 4. é…ç½®ç¯å¢ƒå˜é‡
å¤åˆ¶ `env.example` ä¸º `.env` å¹¶ä¿®æ”¹é…ç½®ï¼š
```bash
cp env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š
```env
# æœåŠ¡å™¨é…ç½®
PORT=3000
NODE_ENV=development

# æ–‡ä»¶é…ç½®
MAX_FILE_SIZE=100MB
FILE_EXPIRE_DAYS=7
UPLOAD_PATH=./uploads

# æ•°æ®åº“é…ç½®
DB_PATH=./database/files.db
```

### 5. å¯åŠ¨æœåŠ¡
```bash
# å¼€å‘æ¨¡å¼
npm run dev

# ç”Ÿäº§æ¨¡å¼
npm start
```

### 6. è®¿é—®åº”ç”¨
- ä¸»é¡µé¢: http://localhost:3000
- ç®¡ç†é¢æ¿: http://localhost:3000/admin.html
- APIæ–‡æ¡£: http://localhost:3000/api/health

## ğŸš€ ä½¿ç”¨è¯´æ˜

### ä¸Šä¼ æ–‡ä»¶
1. è®¿é—®ä¸»é¡µé¢
2. æ‹–æ‹½æ–‡ä»¶åˆ°ä¸Šä¼ åŒºåŸŸæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶
3. ç­‰å¾…ä¸Šä¼ å®Œæˆ
4. å¤åˆ¶åˆ†äº«ç ã€éªŒè¯ç å’Œåˆ†äº«é“¾æ¥

### ä¸‹è½½æ–‡ä»¶
1. åœ¨ä¸‹è½½åŒºåŸŸè¾“å…¥åˆ†äº«ç å’ŒéªŒè¯ç 
2. ç‚¹å‡»"è·å–æ–‡ä»¶ä¿¡æ¯"æŸ¥çœ‹æ–‡ä»¶è¯¦æƒ…
3. ç‚¹å‡»"ä¸‹è½½æ–‡ä»¶"å¼€å§‹ä¸‹è½½

### ç®¡ç†æ–‡ä»¶
1. è®¿é—®ç®¡ç†é¢æ¿
2. æŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨ã€ç»Ÿè®¡ä¿¡æ¯
3. ç®¡ç†æ–‡ä»¶ã€æ¸…ç†è¿‡æœŸæ–‡ä»¶

## ğŸ“ é¡¹ç›®ç»“æ„

```
fast-file-transfer/
â”œâ”€â”€ public/                 # å‰ç«¯é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html         # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ admin.html         # ç®¡ç†é¢æ¿
â”‚   â”œâ”€â”€ styles.css         # ä¸»é¡µé¢æ ·å¼
â”‚   â”œâ”€â”€ admin.css          # ç®¡ç†é¢æ¿æ ·å¼
â”‚   â”œâ”€â”€ script.js          # ä¸»é¡µé¢è„šæœ¬
â”‚   â””â”€â”€ admin.js           # ç®¡ç†é¢æ¿è„šæœ¬
â”œâ”€â”€ config/                # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ database.js        # æ•°æ®åº“é…ç½®
â”œâ”€â”€ routes/                # è·¯ç”±æ–‡ä»¶
â”‚   â”œâ”€â”€ upload.js          # ä¸Šä¼ è·¯ç”±
â”‚   â”œâ”€â”€ download.js        # ä¸‹è½½è·¯ç”±
â”‚   â””â”€â”€ admin.js           # ç®¡ç†è·¯ç”±
â”œâ”€â”€ services/              # ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ fileService.js     # æ–‡ä»¶æœåŠ¡
â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ fileUtils.js       # æ–‡ä»¶å·¥å…·
â”œâ”€â”€ scripts/               # è„šæœ¬æ–‡ä»¶
â”‚   â””â”€â”€ init-db.js         # æ•°æ®åº“åˆå§‹åŒ–
â”œâ”€â”€ uploads/               # ä¸Šä¼ æ–‡ä»¶ç›®å½•
â”œâ”€â”€ database/              # æ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ server.js              # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®
â”œâ”€â”€ env.example            # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜
```

## ğŸ”§ API æ¥å£

### æ–‡ä»¶ä¸Šä¼ 
```
POST /api/upload
Content-Type: multipart/form-data

å‚æ•°:
- file: ä¸Šä¼ çš„æ–‡ä»¶

å“åº”:
{
  "success": true,
  "data": {
    "fileId": "æ–‡ä»¶ID",
    "shareCode": "åˆ†äº«ç ",
    "accessCode": "éªŒè¯ç ",
    "fileName": "æ–‡ä»¶å",
    "fileSize": "æ–‡ä»¶å¤§å°",
    "downloadUrl": "ä¸‹è½½é“¾æ¥",
    "expireTime": "è¿‡æœŸæ—¶é—´"
  }
}
```

### è·å–æ–‡ä»¶ä¿¡æ¯
```
POST /api/download/info/:shareCode
Content-Type: application/json

å‚æ•°:
{
  "accessCode": "éªŒè¯ç "
}

å“åº”:
{
  "success": true,
  "data": {
    "fileName": "æ–‡ä»¶å",
    "fileSize": "æ–‡ä»¶å¤§å°",
    "fileType": "æ–‡ä»¶ç±»å‹",
    "uploadTime": "ä¸Šä¼ æ—¶é—´",
    "expireTime": "è¿‡æœŸæ—¶é—´",
    "downloadCount": "ä¸‹è½½æ¬¡æ•°"
  }
}
```

### ä¸‹è½½æ–‡ä»¶
```
GET /api/download/:shareCode?accessCode=éªŒè¯ç 

å“åº”: æ–‡ä»¶æµ
```

### ç®¡ç†æ¥å£
```
GET /api/admin/files          # è·å–æ–‡ä»¶åˆ—è¡¨
GET /api/admin/stats          # è·å–ç»Ÿè®¡ä¿¡æ¯
POST /api/admin/cleanup       # æ¸…ç†è¿‡æœŸæ–‡ä»¶
```

## ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

- **æ–‡ä»¶ç±»å‹éªŒè¯**: åªå…è®¸ä¸Šä¼ æŒ‡å®šç±»å‹çš„æ–‡ä»¶
- **æ–‡ä»¶å¤§å°é™åˆ¶**: æœ€å¤§100MBæ–‡ä»¶å¤§å°é™åˆ¶
- **é¢‘ç‡é™åˆ¶**: é˜²æ­¢æ¶æ„ä¸Šä¼ å’Œä¸‹è½½
- **éªŒè¯ç ä¿æŠ¤**: åŒé‡éªŒè¯ç¡®ä¿æ–‡ä»¶å®‰å…¨
- **è‡ªåŠ¨è¿‡æœŸ**: æ–‡ä»¶è‡ªåŠ¨åˆ é™¤é˜²æ­¢å­˜å‚¨æ»¥ç”¨

## ğŸ”„ æ•°æ®æµç¨‹

1. **ä¸Šä¼ æµç¨‹**:
   - ç”¨æˆ·é€‰æ‹©æ–‡ä»¶ â†’ éªŒè¯æ–‡ä»¶ç±»å‹å’Œå¤§å° â†’ ä¿å­˜åˆ°æœ¬åœ° â†’ ç”Ÿæˆæ–‡ä»¶ID â†’ åˆ›å»ºåˆ†äº«é“¾æ¥ â†’ è¿”å›åˆ†äº«ä¿¡æ¯

2. **ä¸‹è½½æµç¨‹**:
   - ç”¨æˆ·è¾“å…¥åˆ†äº«ç å’ŒéªŒè¯ç  â†’ éªŒè¯è®¿é—®æƒé™ â†’ æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ â†’ è®°å½•è®¿é—®æ—¥å¿— â†’ è¿”å›æ–‡ä»¶æµ

3. **æ¸…ç†æµç¨‹**:
   - å®šæ—¶ä»»åŠ¡æ£€æŸ¥è¿‡æœŸæ–‡ä»¶ â†’ æ ‡è®°ä¸ºå·²åˆ é™¤ â†’ æ¸…ç†æœ¬åœ°æ–‡ä»¶

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### files è¡¨
- `id`: ä¸»é”®
- `file_id`: æ–‡ä»¶å”¯ä¸€æ ‡è¯†
- `original_name`: åŸå§‹æ–‡ä»¶å
- `file_size`: æ–‡ä»¶å¤§å°
- `file_type`: æ–‡ä»¶ç±»å‹
- `file_path`: æ–‡ä»¶å­˜å‚¨è·¯å¾„
- `upload_time`: ä¸Šä¼ æ—¶é—´
- `expire_time`: è¿‡æœŸæ—¶é—´
- `download_count`: ä¸‹è½½æ¬¡æ•°
- `is_deleted`: æ˜¯å¦å·²åˆ é™¤

### share_links è¡¨
- `id`: ä¸»é”®
- `file_id`: å…³è”æ–‡ä»¶ID
- `share_code`: åˆ†äº«ç 
- `access_code`: éªŒè¯ç 
- `created_time`: åˆ›å»ºæ—¶é—´
- `last_access_time`: æœ€åè®¿é—®æ—¶é—´
- `access_count`: è®¿é—®æ¬¡æ•°
- `is_active`: æ˜¯å¦æ¿€æ´»

### access_logs è¡¨
- `id`: ä¸»é”®
- `file_id`: æ–‡ä»¶ID
- `share_code`: åˆ†äº«ç 
- `access_time`: è®¿é—®æ—¶é—´
- `ip_address`: IPåœ°å€
- `user_agent`: ç”¨æˆ·ä»£ç†

## ğŸš€ éƒ¨ç½²å»ºè®®

### å¼€å‘ç¯å¢ƒ
```bash
npm run dev
```

### ç”Ÿäº§ç¯å¢ƒ
1. ä½¿ç”¨ PM2 è¿›ç¨‹ç®¡ç†
```bash
npm install -g pm2
pm2 start server.js --name "file-transfer"
```

2. ä½¿ç”¨ Nginx åå‘ä»£ç†
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

3. é…ç½® HTTPS
```bash
# ä½¿ç”¨ Let's Encrypt
certbot --nginx -d your-domain.com
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
- `PORT`: æœåŠ¡å™¨ç«¯å£ (é»˜è®¤: 3000)
- `NODE_ENV`: è¿è¡Œç¯å¢ƒ (development/production)
- `MAX_FILE_SIZE`: æœ€å¤§æ–‡ä»¶å¤§å° (é»˜è®¤: 100MB)
- `FILE_EXPIRE_DAYS`: æ–‡ä»¶è¿‡æœŸå¤©æ•° (é»˜è®¤: 7)
- `UPLOAD_PATH`: ä¸Šä¼ æ–‡ä»¶è·¯å¾„ (é»˜è®¤: ./uploads)
- `DB_PATH`: æ•°æ®åº“æ–‡ä»¶è·¯å¾„ (é»˜è®¤: ./database/files.db)

### æ–‡ä»¶ç±»å‹æ”¯æŒ
- å›¾ç‰‡: jpg, jpeg, png, gif, bmp, webp
- æ–‡æ¡£: pdf, doc, docx, xls, xlsx, ppt, pptx
- æ–‡æœ¬: txt, md, csv
- å‹ç¼©åŒ…: zip, rar, 7z, tar, gz
- è§†é¢‘: mp4, avi, mov, wmv, flv
- éŸ³é¢‘: mp3, wav, flac, aac
- å¯æ‰§è¡Œæ–‡ä»¶: exe, msi, dmg, deb, rpm

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- æäº¤ Issue
- å‘é€é‚®ä»¶
- åˆ›å»º Pull Request

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºé¡¹ç›®ï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‰è¯·ç¡®ä¿è¿›è¡Œå……åˆ†çš„å®‰å…¨æµ‹è¯•å’Œæ€§èƒ½ä¼˜åŒ–ã€‚
